<!-- Kilo Bastion - Cyberpunk Marketing Site -->
<div class="scanline"></div>

<!-- Router Outlet for Drone/Meshtastic Components -->
<router-outlet *ngIf="!showMarketingSite"></router-outlet>

<!-- Marketing Site (shown when not on routed pages) -->
<div *ngIf="showMarketingSite"
  class="h-screen w-screen flex flex-col md:flex-row bg-[#050505] font-mono text-gray-200 overflow-hidden fixed inset-0">
  <!-- Navigation Sidebar -->
  <app-nav-sidebar [currentView]="currentView" (viewChange)="onViewChange($event)">
  </app-nav-sidebar>

  <!-- Main Content Area -->
  <main class="flex-1 flex flex-col relative overflow-hidden">
    <!-- Top Status Bar -->
    <div
      class="bg-black border-b border-gray-800 p-2 px-6 flex justify-between items-center text-xs font-mono flex-shrink-0">
      <div class="flex space-x-4 text-gray-500 items-center">
        <span>STATUS: <span
            [class]="'animate-pulse ' + (systemStatus === 'GREEN' ? 'text-[#39ff14]' : systemStatus === 'YELLOW' ? 'text-yellow-500' : 'text-red-500')">{{
            systemStatus }}</span></span>
        <span class="hidden md:inline">ENCRYPTION: AES-256</span>
        <span class="hidden md:inline">NODES: 12</span>
        <span class="hidden md:inline"><app-plugin-health-indicator></app-plugin-health-indicator></span>
      </div>
      <div class="text-[#39ff14] flex items-center space-x-3">
        <span class="md:hidden"><app-plugin-health-indicator></app-plugin-health-indicator></span>
        <span>// KILO_BASTION_INTERFACE //</span>
      </div>
    </div>

    <div class="flex flex-1 overflow-hidden">
      <!-- Live Log Sidebar (Desktop) / Bottom (Mobile) -->
      <app-system-log></app-system-log>

      <!-- View Content -->
      <div class="flex-1 flex flex-col bg-[#050505] relative overflow-auto">
        <!-- Home/Hero View -->
        <app-hero *ngIf="currentView === 'home'" (navigate)="onViewChange($event)">
        </app-hero>

        <!-- Features View -->
        <app-features *ngIf="currentView === 'features'"></app-features>

        <!-- Marketplace View -->
        <app-marketplace *ngIf="currentView === 'marketplace'"></app-marketplace>

        <!-- Community View -->
        <app-community *ngIf="currentView === 'community'"></app-community>

        <!-- VPN Dashboard View -->
        <app-vpn-dashboard *ngIf="currentView === 'vpn'"></app-vpn-dashboard>

        <!-- Billing Portal View -->
        <app-billing-portal *ngIf="currentView === 'billing'"></app-billing-portal>

        <!-- Install Instructions View -->
        <div *ngIf="currentView === 'install'"
          class="p-12 text-center flex-1 flex flex-col justify-center items-center">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#39ff14" stroke-width="2" class="mb-6">
            <rect x="3" y="3" width="7" height="7" />
            <rect x="14" y="3" width="7" height="7" />
            <rect x="14" y="14" width="7" height="7" />
            <rect x="3" y="14" width="7" height="7" />
          </svg>
          <h2 class="text-3xl text-white font-header mb-4">Initialize Sequence</h2>
          <div
            class="bg-black border border-gray-700 p-6 rounded text-left font-mono text-sm text-gray-300 max-w-lg w-full">
            <p class="text-gray-500 mb-2"># Clone the repository</p>
            <p class="text-[#39ff14] mb-4">git clone https://github.com/Kilolost13/kilos-bastion-ai.git</p>

            <p class="text-gray-500 mb-2"># Navigate to directory</p>
            <p class="text-[#39ff14] mb-4">cd kilos-bastion-ai</p>

            <p class="text-gray-500 mb-2"># Install dependencies</p>
            <p class="text-[#39ff14] mb-4">pip install -r kilo_v2/requirements.txt</p>

            <p class="text-gray-500 mb-2"># Ignite System</p>
            <p class="text-[#39ff14]">python -m uvicorn kilo_v2.server_core:app</p>
          </div>
          <button (click)="onViewChange('home')" class="mt-8 text-gray-500 hover:text-white underline">Abort
            Sequence</button>
        </div>
      </div>
    </div>
  </main>
</div>
<!-- End Marketing Site -->