# ============================================================
# Bastion AI - Production Environment Configuration Template
# ============================================================
# Copy this file to .env and configure for your deployment
# Never commit the actual .env file to version control

# --- DEPLOYMENT MODE ---
# Set to 'production' for deployed appliances, 'development' for local testing
KILO_ENV=production

# --- SERVER CONFIGURATION ---
KILO_SERVER_PORT=8001
KILO_HOST=0.0.0.0

# --- SECURITY & AUTHENTICATION ---
# CRITICAL: Generate a secure random API key before deployment
# Use: python -c "import secrets; print(secrets.token_urlsafe(32))"
KILO_API_KEY=CHANGE_ME_BEFORE_DEPLOYMENT

# --- AI/LLM CONFIGURATION ---
# Gemini API key for AI features (optional but recommended)
GEMINI_API_KEY=
GEMINI_MODEL_NAME=gemini-2.0-flash-exp

# --- DATA STORAGE ---
# Directory for persistent data (logs, database, security baseline)
DATA_DIR=kilo_data
INDEX_STORAGE_PATH=kilo_memory_index

# --- PLUGIN CONFIGURATION ---
# Smart hybrid sandbox defaults (secure production posture)
# Isolation mode: "process" (safer) or "thread" (faster for dev)
PLUGIN_ISOLATION_MODE=process

# Enable sandbox isolation
PLUGIN_SANDBOX_ENABLED=true

# Resource limits
PLUGIN_DEFAULT_TIMEOUT=30
PLUGIN_DEFAULT_MEMORY_LIMIT_MB=512
PLUGIN_DEFAULT_CPU_TIME_LIMIT=60

# Network policy (default deny; opt-in per plugin manifest)
PLUGIN_ALLOW_NETWORK=false

# Auto-escalation: move to process isolation after repeated failures
PLUGIN_AUTO_ESCALATE_ON_FAILURE=true
PLUGIN_FAILURE_THRESHOLD_FOR_ESCALATION=2

# Retry and health cadence
PLUGIN_MAX_RETRIES=3
PLUGIN_HEALTH_INTERVAL=15
PLUGIN_RESTART_RETRIES=3

# Comma-separated list of plugins to blacklist (leave empty for production)
BLACKLISTED_PLUGINS=

# --- MESHTASTIC TRACKER PLUGIN ---
# Enable mesh radio tracking for pets/kids/employees
# Requires: pip install meshtastic
MESHTASTIC_ENABLE=false
MESHTASTIC_HOST=localhost
MESHTASTIC_PORT=2960
MESHTASTIC_SERIAL=

# --- DRONE CONTROL PLUGIN ---
# Enable autonomous drone operations
# Requires: pip install mavsdk opencv-python
# WARNING: Keep DRONE_SIMULATION=true until ready for real flights!
DRONE_ENABLE=false
DRONE_SIMULATION=true
DRONE_ENDPOINT=udp://:14540
DRONE_SAFETY_REQUIRE_CONFIRMATION=true
DRONE_MAX_ALT=50.0
DRONE_GEOFENCE=

# --- DRONE VIDEO STREAMING (FPV) ---
# Enable real-time video streaming from drone camera
# Requires camera on drone (RealSense, USB camera, or RTSP stream)
DRONE_VIDEO_ENABLE=false
DRONE_CAMERA_INDEX=0
DRONE_VIDEO_QUALITY=80
DRONE_VIDEO_FPS=30

# --- DRONE MANUAL CONTROL ---
# Enable manual RC override via gamepad/joystick
# WARNING: Requires manual control token and implements deadman switch
DRONE_MANUAL_CONTROL_ENABLE=false
DRONE_DEADMAN_TIMEOUT=2.0

# --- GOOGLE MAPS INTEGRATION ---
# API key for Google Maps JavaScript API (required for mesh tracker UI)
# Get your key at: https://console.cloud.google.com/google/maps-apis
GOOGLE_MAPS_API_KEY=

# --- OBSTACLE AVOIDANCE ---
# Enable pre-flight path collision detection
DRONE_OBSTACLE_CHECK_ENABLE=false

# --- CAMERA CONFIGURATION ---
# Default camera settings (auto-detected on startup)
CAMERA_INDEX=0
CAMERA_FPS=5
CAMERA_RESOLUTION=640,480

# --- SECURITY MONITORING ---
# Enable network honeypot for intrusion detection
ENABLE_NETWORK_HONEYPOT=false
NETWORK_HONEYPOT_PORT=8888

# IP enrichment (for attack source identification)
ENABLE_IP_ENRICHMENT=false
IP_ENRICHMENT_PROVIDER=stub
IP_ENRICHMENT_API_KEY=

# Caddy access log path for security analysis
CADDY_LOG_PATH=/var/log/caddy/access.log

# --- LOGGING ---
LOG_LEVEL=INFO
LOG_FILE=server.log

# --- HARDWARE WATCHDOG ---
# Enable hardware watchdog for crash recovery
ENABLE_WATCHDOG=false
WATCHDOG_TIMEOUT=60

# --- VPN SERVER CONFIGURATION ---
# WireGuard VPN server for remote access
VPN_SERVER_ENABLED=false
VPN_SERVER_PORT=51820
VPN_SERVER_INTERFACE=wg0
VPN_SERVER_NETWORK=10.8.0.0/24
VPN_SERVER_DNS=1.1.1.1,8.8.8.8

# --- VPN CLIENT CONFIGURATION ---
# Route Bastion traffic through external VPN
VPN_CLIENT_ENABLED=false
VPN_CLIENT_AUTO_CONNECT=false
VPN_CLIENT_DEFAULT_PROFILE=

# --- VPS BRIDGE CONFIGURATION ---
# Secure connection to cloud VPS for remote access relay
VPS_BRIDGE_ENABLED=false
VPS_URL=https://your-vps.example.com
VPS_API_KEY=
BASTION_ID=bastion-001

# VPS Heartbeat settings
VPS_HEARTBEAT_INTERVAL=60
VPS_HEARTBEAT_TIMEOUT=10

# VPS Data sync
VPS_SYNC_ENABLED=false
VPS_SYNC_INTERVAL=3600

# VPS Command relay
VPS_RELAY_ENABLED=false

# --- BACKUP CONFIGURATION ---
# Automatic backup schedule (cron format)
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/var/backups/bastion

# --- UPDATE SYSTEM ---
# Enable automatic updates (requires careful testing)
AUTO_UPDATE_ENABLED=false
UPDATE_CHANNEL=stable
UPDATE_CHECK_INTERVAL=86400

# --- NOTIFICATION SETTINGS ---
# Email notifications for critical events
SMTP_ENABLED=false
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
ALERT_EMAIL=

# --- STRIPE PAYMENT SETTINGS ---
# Stripe API keys for subscription management
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# Stripe price IDs (create these in your Stripe dashboard)
STRIPE_PRICE_PRO=price_pro_monthly
STRIPE_PRICE_BUSINESS=price_business_monthly

# --- ADVANCED SETTINGS ---
# Database connection pool
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10

# Worker processes (auto-detect if not set)
WORKERS=4

# Request timeout (seconds)
TIMEOUT=120

# Enable debug mode (NEVER in production)
DEBUG=false
